/**
 * saphir v0.1.0 (https://github.com/tameraydin/saphir)
 * Copyright 2015 Tamer Aydin (http://tamerayd.in)
 * Licensed under MIT
 */
function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),_get=function(t,e,r){for(var n=!0;n;){var i=t,o=e,c=r;s=a=u=void 0,n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(c)}var a=Object.getPrototypeOf(i);if(null===a)return void 0;t=a,e=o,r=c,n=!0}};(function(){"use strict";function t(t,n,i){return e(t)?t:t instanceof Array?new a(t,n):r(t)?new l(t,n,i):t}function e(t){return t instanceof l||t instanceof a}function r(t){return t instanceof Object&&Object.getPrototypeOf(t)===Object.prototype}function n(){var t=this.__p;t&&(t instanceof l?t.__cb[this.__pk]&&t.__cb[this.__pk](this):t.__cb&&t.__cb(t),t.__ecb())}function i(t,e,r,n){for(var i=Object.getOwnPropertyNames(e.prototype),o=0;o<i.length;o++){var c=i[o];typeof e.prototype[c]===r&&"constructor"!==c&&Object.defineProperty(t,c,{writable:!0,value:n(e,c)})}}var o=function(){};o.prototype={},i(o.prototype,Array,"function",function(t,e){return function(){t.prototype[e].apply(this.__value,arguments),this.updateKeys(),this.__cb&&this.__cb(this)}});var c=function h(){_classCallCheck(this,h),this.enumerable=!0,this.configurable=!0},s=function(e){function r(e){_classCallCheck(this,r),_get(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.get=function(){return this.__value[e]},this.set=function(r){var n=this.__value[e];r!==n&&(this.__value[e]=t(r,this),this.__cb&&this.__cb(this))}}return _inherits(r,e),r}(c),u=function(e){function r(e,n){_classCallCheck(this,r),_get(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),this.get=function(){return e},this.set=function(r){r!==e&&(e=t(r,this,n),this.__cb[n]&&this.__cb[n](e),this.__ecb())}}return _inherits(r,e),r}(c),a=function(e){function r(e,i){_classCallCheck(this,r),_get(Object.getPrototypeOf(r.prototype),"constructor",this).call(this),Object.defineProperty(this,"__p",{writable:!0,value:i}),Object.defineProperty(this,"__cb",{writable:!0,value:{}}),Object.defineProperty(this,"__ecb",{writable:!1,value:n}),Object.defineProperty(this,"__value",{writable:!0,value:[]}),Object.defineProperty(this,"length",{get:function(){return this.__value.length}}),Object.defineProperty(this,"updateKeys",{value:function(){var e=arguments.length<=0||void 0===arguments[0]?this.__value:arguments[0];for(var r in e)this.__value[r]=t(e[r],this),Object.defineProperty(this,r,new s(r))}}),this.updateKeys(e)}return _inherits(r,e),_createClass(r,[{key:"subscribe",value:function(t){return this.__cb=t,this}},{key:"unsubscribe",value:function(){return this.__cb=null,this}}]),r}(o),l=function(){function e(r,i,o){_classCallCheck(this,e),Object.defineProperty(this,"__p",{writable:!0,value:i}),Object.defineProperty(this,"__pk",{writable:!0,value:o}),Object.defineProperty(this,"__cb",{writable:!0,value:{}}),Object.defineProperty(this,"__ecb",{writable:!1,value:n});var c=void 0;for(var s in r)c=t(r[s],this,s),Object.defineProperty(this,s,new u(c,s))}return _createClass(e,[{key:"subscribe",value:function(t,e){return"string"==typeof t&&"function"==typeof e&&this.hasOwnProperty(t)&&(this.__cb[t]=e),this}},{key:"unsubscribe",value:function(t){return"string"==typeof t&&this.__cb[t]&&(this.__cb[t]=null),this}}]),e}(),f={SaphirObject:l,SaphirArray:a},_=this;"undefined"!=typeof exports&&"undefined"!=typeof module&&module.exports?module.exports=f:"function"==typeof define&&define.amd?define("saphir",[],function(){return f}):_.saphir=f}).call(this);